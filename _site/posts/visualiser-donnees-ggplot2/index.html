<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>Codons: Visualisation de données</title>

<meta property="description" itemprop="description" content="Créer des graphiques avec ggplot2."/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2022-06-30"/>
<meta property="article:created" itemprop="dateCreated" content="2022-06-30"/>
<meta name="article:author" content="Jonathan Kitt"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Codons: Visualisation de données"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Créer des graphiques avec ggplot2."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Codons"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="Codons: Visualisation de données"/>
<meta property="twitter:description" content="Créer des graphiques avec ggplot2."/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","categories","output","draft"]}},"value":[{"type":"character","attributes":{},"value":["Visualisation de données"]},{"type":"character","attributes":{},"value":["Créer des graphiques avec ggplot2."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Jonathan Kitt"]}]}]},{"type":"character","attributes":{},"value":["2022-06-30"]},{"type":"character","attributes":{},"value":["R","RStudio","Graphiques","ggpplot2","Tidyverse"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth","self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[1]},{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"logical","attributes":{},"value":[false]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["img/barplot_especes.png","img/boxplot.png","img/colorbrewer2.png","img/export_ggplot_01.png","img/export_ggplot_02.png","img/geom_point_shapes.png","img/ggplot-grammar-of-graphics.png","img/ggplot_01.gif","img/ggplot_02.gif","img/ggplot_layers.png","img/ggplot_parameters.png","img/ggplot_themes_axis.png","img/ggplot_themes_legend.png","img/ggplot_themes_panel.png","img/ggplot_themes_plot.png","img/ggplot2_blank.png","img/hist1.png","img/hist2.png","img/hist3.png","img/hist4.png","img/hist5.png","img/hist6.png","img/hist7.png","img/lter_penguins.png","img/patchwork_pingouins.png","img/rcolorbrewer.png","img/sp1.png","visualiser-donnees-ggplot2_files/anchor-4.2.2/anchor.min.js","visualiser-donnees-ggplot2_files/bowser-1.9.3/bowser.min.js","visualiser-donnees-ggplot2_files/distill-2.2.21/template.v2.js","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-10-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-11-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-12-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-13-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-14-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-15-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-16-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-17-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-19-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-21-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-22-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-23-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-24-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-25-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-26-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-27-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-28-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-29-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-30-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-31-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-32-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-33-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-34-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-35-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-36-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-37-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-38-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-39-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-40-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-41-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-42-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-43-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-44-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-45-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-46-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-47-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-48-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-49-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-50-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-51-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-52-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-53-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-54-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-55-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-56-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-57-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-58-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-59-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-60-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-61-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-62-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-63-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-64-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-65-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-66-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-67-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-68-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-69-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-72-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-73-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-8-1.png","visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-9-1.png","visualiser-donnees-ggplot2_files/header-attrs-2.11/header-attrs.js","visualiser-donnees-ggplot2_files/header-attrs-2.14/header-attrs.js","visualiser-donnees-ggplot2_files/jquery-3.6.0/jquery-3.6.0.js","visualiser-donnees-ggplot2_files/jquery-3.6.0/jquery-3.6.0.min.js","visualiser-donnees-ggplot2_files/jquery-3.6.0/jquery-3.6.0.min.map","visualiser-donnees-ggplot2_files/popper-2.6.0/popper.min.js","visualiser-donnees-ggplot2_files/tippy-6.2.7/tippy-bundle.umd.min.js","visualiser-donnees-ggplot2_files/tippy-6.2.7/tippy-light-border.css","visualiser-donnees-ggplot2_files/tippy-6.2.7/tippy.css","visualiser-donnees-ggplot2_files/tippy-6.2.7/tippy.umd.min.js","visualiser-donnees-ggplot2_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        return "<p>" + $('#ref-' + ref).html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.11/header-attrs.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<style type="text/css">

/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */

d-article p code {
  color: black;
  background: #dcdcdc;
  font-weight: 400;
  font-size: 0.9em;
}
</style>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Visualisation de données","description":"Créer des graphiques avec ggplot2.","authors":[{"author":"Jonathan Kitt","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-06-30T00:00:00.000+02:00","citationText":"Kitt, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Codons</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Accueil</a>
<a href="../../about.html">A propos</a>
<a href="../../links.html">Liens</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Visualisation de données</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:R" class="dt-tag">R</a>
  <a href="../../index.html#category:RStudio" class="dt-tag">RStudio</a>
  <a href="../../index.html#category:Graphiques" class="dt-tag">Graphiques</a>
  <a href="../../index.html#category:ggpplot2" class="dt-tag">ggpplot2</a>
  <a href="../../index.html#category:Tidyverse" class="dt-tag">Tidyverse</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>Créer des graphiques avec ggplot2.</p></p>
</div>

<div class="d-byline">
  Jonathan Kitt  
  
<br/>2022-06-30
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#construire">Construire un graphique <code>ggplot2</code></a></li>
<li><a href="#creer">Graphiques simples</a></li>
<li><a href="#facet">Graphiques multiples</a></li>
<li><a href="#exporter">Exporter un graphique</a></li>
<li><a href="#ameliorer">Améliorer ses graphiques</a></li>
<li><a href="#combiner-des-graphiques-avec-patchwork">Combiner des graphiques avec <code>patchwork</code></a></li>
</ul>
</nav>
</div>
<h1 id="introduction">Introduction</h1>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/ggplot2_blank.png" width="2364" /></p>
</div>
<p>Dessin de <a href="https://github.com/allisonhorst/stats-illustrations/blob/master/rstats-blanks/ggplot2_blank.png">Allison Horst</a></p>
<p><br></p>
<p>Nous avons vu comment <a href="https://codons.netlify.app/posts/premiers-pas-avec-r/">importer nos données dans RStudio</a>, et comment <a href="https://codons.netlify.app/posts/manipuler-donnees-tidyverse/">les manipuler et les mettre en forme</a>.</p>
<p><br></p>
<p>Dans ce tutoriel nous allons voir comment communiquer les résultats de nos analyses - à l’aide de la <strong>visualisation de données</strong> :</p>
<p><br></p>
<p><strong>1. <a href="#construction">Construire un graphique <code>ggplot2</code></a></strong></p>
<p><strong>2. <a href="#creer">Graphiques simples</a></strong> :</p>
<ul>
<li><p><a href="#scatterplot"><code>geom_point()</code></a></p></li>
<li><p><a href="#histogram"><code>geom_histogram()</code></a></p></li>
<li><p><a href="#boxplot"><code>geom_boxplot()</code></a></p></li>
<li><p><a href="#barplot"><code>geom_bar()</code></a></p></li>
</ul>
<p><strong>3. <a href="#facet">Graphiques multiples</a></strong></p>
<ul>
<li><p><a href="#facet_wrap">`facet_wrap()``</a></p></li>
<li><p><a href="#facet_grid"><code>facet_grid()</code></a></p></li>
</ul>
<p><strong>4. <a href="#exporter">Exporter un graphique</a></strong></p>
<ul>
<li><p><a href="#onglet_plots">Depuis l’onglet <em>Plots</em></a></p></li>
<li><p><a href="#ggsave">Avec <code>ggsave()</code></a></p></li>
</ul>
<p><strong>5. <a href="#ameliorer">Améliorer ses graphiques</a></strong></p>
<ul>
<li><p><a href="#theme">Les différents éléments de <code>theme()</code></a></p></li>
<li><p><a href="#fonts">Modifier la police de caractères avec <code>showtext</code></a></p></li>
</ul>
<p>**6. <a href="#patchwork">Combiner des graphiques avec <code>patchwork</code></a></p>
<p><br></p>
<h1 id="construire">Construire un graphique <code>ggplot2</code></h1>
<p><br></p>
<p>Le package <code>ggplot2</code> (qui fait partie de la suite Tidyverse) repose sur le principe de <strong>grammaire des graphiques</strong> : notre visualisation se construit étape par étape, en procédant par <strong>couches</strong>, comme le montre la figure ci-dessous.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/ggplot-grammar-of-graphics.png" width="960" /></p>
</div>
<p>Figure tirée de <a href="https://larmarange.github.io/analyse-R/ggplot2.html">ggplot2 et la grammaire des graphiques</a></p>
<p><br></p>
<p>Toutes ces couches ne sont pas nécessaires à la construction d’un graphique.<br />
La figure ci-dessous montre de manière simplifiée comment créer un <code>ggplot</code> basique :</p>
<p><strong>1) <code>ggplot()</code></strong> : initialisation de l’outil graphique</p>
<p><strong>2) <code>aes()</code></strong> : paramètres esthétiques (répartition des variables sur les axes, couleurs, …)</p>
<p><strong>3) <code>geom()</code></strong> : type de représentation (points, lignes, …)</p>
<p><strong>4) <code>theme()</code></strong> : apparence du graphique (arrière-plan, taille et alignement du texte, …)</p>
<div class="layout-chunk" data-layout="l-page">
<p><img src="img/ggplot_01.gif" /><!-- --></p>
</div>
<p>Vous remarquerez dans le code la présence du signe <strong>“+”</strong> à la fin de chaque ligne : c’est ce qui permet d’ajouter une couche à votre graphique.</p>
<h1 id="creer">Graphiques simples</h1>
<p><br></p>
<p>Commençons par ouvrir un <strong>nouveau script R</strong> et <strong>importer le jeu de données</strong> :</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Ateliers codons!</span>
<span class='co'># 04 - Visualisation de donnees avec ggplot2</span>
<span class='co'># 2022-06-30</span>

<span class='co'># Definir le repertoire de travail ----</span>

<span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='st'>"codons/C-04-VisualisationDonnees"</span><span class='op'>)</span>

<span class='co'># Charger le Tidyverse ----</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>

<span class='co'># Importer le jeu de donnees ----</span>

<span class='va'>pingouins</span> <span class='op'>&lt;-</span> <span class='fu'>readr</span><span class='fu'>::</span><span class='fu'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_csv</a></span><span class='op'>(</span><span class='st'>"https://raw.githubusercontent.com/codons-blog/C-04-VisualisationDonnees/main/pingouins.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><br></p>
<p>Il est toujours utile de <strong>vérifier les données</strong> importées avant d’aller plus loin :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='op'>(</span><span class='va'>pingouins</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 342
Columns: 6
$ espece       &lt;chr&gt; &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie~
$ ile          &lt;chr&gt; &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgers~
$ bec_lngr_mm  &lt;dbl&gt; 39.1, 39.5, 40.3, 36.7, 39.3, 38.9, 39.2, 34.1,~
$ bec_htr_mm   &lt;dbl&gt; 18.7, 17.4, 18.0, 19.3, 20.6, 17.8, 19.6, 18.1,~
$ aile_lngr_mm &lt;dbl&gt; 181, 186, 195, 193, 190, 181, 195, 193, 190, 18~
$ masse_g      &lt;dbl&gt; 3750, 3800, 3250, 3450, 3650, 3625, 4675, 3475,~</code></pre>
</div>
<p><br></p>
<p>Il s’agit du jeu de données <a href="https://allisonhorst.github.io/palmerpenguins/">Palmer penguins</a>, disponible dans le package R <a href="https://cloud.r-project.org/web/packages/palmerpenguins/index.html">palmerpenguins</a>.</p>
<p>Différents paramètres ont été mesurés sur trois espèces de pingouins, sur trois îles de l’archipel Palmer en Antarctique.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/lter_penguins.png" width="900" /></p>
</div>
<p>Dessin de <a href="https://allisonhorst.github.io/palmerpenguins/reference/figures/lter_penguins.png">Allison Horst</a></p>
<p><br></p>
<h2 id="scatterplot">Nuage de points (scatter plot)</h2>
<p><br></p>
<p>Intéressons-nous au bec des pingouins en répondant à la question suivante : <strong>quelle est la distribution du rapport entre la hauteur du bec et sa longueur ?</strong>.</p>
<p>Afin de bien comprendre comment construire un graphique avec <code>ggplot2</code>, procédons étape par étape.</p>
<p><br></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Initialiser l'outil graphique</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-8-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Paramètres esthétiques : répartition des variables sur les axes</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-9-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Type de visualisation : points</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-10-1.png" width="624" /></p>
</div>
<p><br></p>
<p>Voilà la distribution que nous cherchons à observer. C’est un bon début, mais cela manque de couleurs …</p>
<p><br></p>
<p>Il existe deux façons d’ajouter des couleurs à un <code>ggplot</code> :</p>
<ul>
<li><strong>définir une couleur pour l’ensemble des points</strong> : on placera alors le paramètre couleur <strong>en dehors de la parenthèse <code>aes()</code></strong>.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Une couleur pour l'ensemble des points</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-11-1.png" width="624" /></p>
</div>
<ul>
<li><strong>colorer les points en fonction d’une autre variable</strong> : on placera dans ce cas le paramètre couleur <strong>à l’intérieur de la parenthèse <code>aes()</code></strong>.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Colorer les points en fonction de l'espece</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-12-1.png" width="624" /></p>
</div>
<p>Vous pouvez voir qu’une <strong>légende</strong> permettant de différencier les trois espèces a été ajoutée à droite du graphique.</p>
<p><br></p>
<p>Nous aimerions utiliser les mêmes **couleurs* que celles de la documentation du jeu de données. Nous utilisons pour cela le paramètre <code>scale_colour_manual()</code> :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Modifier les couleurs</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-13-1.png" width="624" /></p>
</div>
<p>La <strong>taille</strong> des points nous semble trop petite : nous allons l’augmenter à l’aide de <code>size</code> :</p>
<aside>
Prend une valeur numérique, par défaut 1
</aside>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Augmenter la taille des points</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-14-1.png" width="624" /></p>
</div>
<p>Afin de rendre le graphique plus lisible, nous pouvons ajouter de la <strong>transparence</strong> aux points à l’aide du paramètre <code>alpha</code> :</p>
<aside>
Entre 0 et 1, par opacité croissante
</aside>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Ajouter de la transparence</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-15-1.png" width="624" /></p>
</div>
<p>Nous allons maintenant ajouter un <strong>titre</strong> et un <strong>sous-titre</strong> à notre graphique, et modifier les <strong>titres des axes</strong> pour les rendre plus explicites :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Ajouter ou modifier les titres du graphique et des axes</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Rapport entre la hauteur et la longueur du bec"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur du bec (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Hauteur du bec (mm)"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-16-1.png" width="624" /></p>
</div>
<p>Le fond gris du graphique est proposé par défaut par <code>ggplot2</code> : il s’agit d’un <strong>thème</strong> définissant l’apparence générale du graphique (couleurs de l’arrière-plan, de la grille, présence ou non d’un cadre, …).</p>
<p>Nous allons utiliser l’un des autres thèmes prédéfinis dans <code>ggplot2</code>, le thème <strong>“minimal”</strong> à l’aide du paramètre <code>theme_minimal()</code>.</p>
<p>Il en existe d’autres : <code>theme_light()</code>, <code>theme_bw()</code>, <code>theme_void()</code>, … N’hésitez pas à les essayer pour trouver celui qui vous convient le mieux !</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Changer le thème</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Rapport entre la hauteur et la longueur du bec"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur du bec (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Hauteur du bec (mm)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-17-1.png" width="624" /></p>
</div>
<h3 id="une-note-sur-les-formes-et-les-couleurs">Une note sur les formes et les couleurs</h3>
<p>Nous pourrions également modifier la forme de nos points, à l’aide du paramètre <code>shape</code>. Il existe 25 types de points, comme montré ci-dessous.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/geom_point_shapes.png" width="700" /></p>
</div>
<p><br></p>
<p>La façon de colorer les points dépend de la forme choisie :</p>
<ul>
<li><p>couleur appliquée au <strong>contour</strong> pour les formes <strong>0 à 14</strong> à l’aide de <code>colour = ...</code></p></li>
<li><p>couleur appliquée à l’<strong>intérieur</strong> pour les formes <strong>15 à 20</strong> à l’aide de <code>fill = ...</code></p></li>
<li><p>couleur appliquée <strong>au contour et à l’intérieur</strong> pour les formes <strong>21 à 24</strong> à l’aide de ces deux paramètres, avec la même couleur ou des couleurs différentes. Pour ces cinq formes, la largeur du contour peut être modifiée à l’aide de <code>stroke = ...</code> (prend une valeur numérique).</p></li>
</ul>
<p><br></p>
<p>Pour donner un exemple, nous pouvons ajouter à nos points un contour noir :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Changer la forme des points</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             shape <span class='op'>=</span> <span class='fl'>23</span>,
             stroke <span class='op'>=</span> <span class='fl'>2</span>,
             colour <span class='op'>=</span> <span class='st'>"black"</span>,
             size <span class='op'>=</span> <span class='fl'>3</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Rapport entre la hauteur et la longueur du bec"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur du bec (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Hauteur du bec (mm)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-19-1.png" width="624" /></p>
</div>
<p><strong>Attention à la logique du code !!</strong> Nous avons choisi de colorer l’intérieur de nos points en fonction de l’espèce : <code>geom_point(aes(fill = espece))</code>. Il faut donc modifier la ligne qui nous permet de changer les couleurs : <strong><code>scale_fill_manual()</code></strong> remplace <code>scale_colour_manual()</code> utilisé précédemment.</p>
<p><br></p>
<p>Le package <code>ggplot2</code> propose de nombreuses palettes de couleurs :</p>
<aside>
<a href="http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/#rcolorbrewer-palette-chart">Palettes prédéfinies dans <code>ggplot2</code></a>
</aside>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/rcolorbrewer.png" width="198" /></p>
</div>
<p>Ces différentes palettes peuvent être utilisées à l’aide de <code>scale_colour_brewer()</code> ou <code>scale_fill_brewer()</code>. Essayons la palette <em>Set3</em> :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Utiliser une palette de couleurs</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_brewer.html'>scale_colour_brewer</a></span><span class='op'>(</span>palette <span class='op'>=</span> <span class='st'>"Set3"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Rapport entre la hauteur et la longueur du bec"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur du bec (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Hauteur du bec (mm)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-21-1.png" width="624" /></p>
</div>
<p>Il existe beaucoup d’autres palettes, accessibles via des packages, dont la liste est <a href="https://github.com/EmilHvitfeldt/r-color-palettes">accessible ici</a>.</p>
<p><br></p>
<h2 id="histogram">Histogramme</h2>
<p><br></p>
<p>Essayons maintenant de répondre à la question suivante : <strong>quelle est la distribution de la longueur des ailes ?</strong>. <br></p>
<p>Nous allons pour cela générer un histogramme à l’aide de <code>geom_histogram()</code> :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Histogramme</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>aile_lngr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
                 alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la longueur des ailes"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur des ailes (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Fréquence"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-22-1.png" width="624" /></p>
</div>
<p>Il existe trois manières d’<strong>arranger la position des histogrammes</strong> des différents groupes :</p>
<p><strong>1) <code>position = "stack</code> (par défaut)</strong> : voir ci-dessus.</p>
<p><strong>2) <code>position = "identity"</code></strong> :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Histogramme - position = "identity"</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>aile_lngr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
                 alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
                 position <span class='op'>=</span> <span class='st'>"identity"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la longueur des ailes"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur des ailes (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Fréquence"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-23-1.png" width="624" /></p>
</div>
<p><strong>3) <code>position = "dodge"</code></strong></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Histogramme - position = "dodge"</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>aile_lngr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
                 alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
                 position <span class='op'>=</span> <span class='st'>"dodge"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la longueur des ailes"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur des ailes (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Fréquence"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-24-1.png" width="624" /></p>
</div>
<p><br></p>
<p>Lorsque vous exécutez ce code, vous pouvez lire le message suivant dans la console : <strong><code>stat_bin()</code> using <code>bins = 30</code>. Pick better value with <code>binwidth</code>.</strong></p>
<p>Cela vous signale que le nombre de classes (bins) choisi pour l’histogramme n’est peut-être pas idéal.</p>
<p>Vous pouvez modifier ces classes de deux façons :</p>
<p><strong>1) en modifiant la largeur de chaque classe sur l’axe x : <code>binwidth = ...</code></strong></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Histogramme - position = "identity" - binwidth = 0.5</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>aile_lngr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
                 alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
                 position <span class='op'>=</span> <span class='st'>"identity"</span>,
                 binwidth <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la longueur des ailes"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur des ailes (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Fréquence"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-25-1.png" width="624" /></p>
</div>
<p><strong>2) en modifiant le nombre de classes à afficher : <code>bins = ...</code></strong></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Histogramme - position = "identity" - bins = 15</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>aile_lngr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
                 alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
                 position <span class='op'>=</span> <span class='st'>"identity"</span>,
                 bins <span class='op'>=</span> <span class='fl'>15</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la longueur des ailes"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur des ailes (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Fréquence"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-26-1.png" width="624" /></p>
</div>
<p><br></p>
<h2 id="boxplot">Boîtes à moustaches (box plot)</h2>
<p>Intéressons-nous maintenant à la masse de nos pingouins : <strong>les masses des trois espèces sont-elles similaires ?</strong></p>
<p>Nous allons créer un graphique en boîte à moustaches à l’aide de <code>geom_boxplot()</code> :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Boxplots</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     y <span class='op'>=</span> <span class='va'>masse_g</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la masse corporelle"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Espèce"</span>,
       y <span class='op'>=</span> <span class='st'>"Masse (g)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-27-1.png" width="624" /></p>
</div>
<p><br></p>
<p>Nous pouvons apporter quelques modifications à ce graphique :</p>
<ul>
<li><p>comme il y a une boîte à moustaches par espèce, nous <strong>pouvons supprimer la légende à l’aide de <code>show_legend = FALSE</code></strong></p></li>
<li><p>pour la même raison, nous pouvons <strong>supprimer le titre de l’axe x : <code>labs(x = "")</code></strong></p></li>
<li><p>nous pouvons <strong>supprimer les données aberrantes (outliers) : <code>outlier.shape = NA</code></strong></p></li>
<li><p><strong>réduire la largeur des boxplots avec <code>width</code></strong></p></li>
<li><p><strong>ajouter de la couleur à l’intérieur des boîtes à moustaches avec <code>aes(fill = espece)</code></strong> : bien penser à ajouter <code>scale_fill_manual()</code> !</p></li>
<li><p><strong>augmenter l’épaisseur des lignes avec <code>lwd</code></strong> (line width)</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Boxplots avec quelques modifications</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     y <span class='op'>=</span> <span class='va'>masse_g</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span>,
                   fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
               show.legend <span class='op'>=</span> <span class='cn'>FALSE</span>,
               outlier.shape <span class='op'>=</span> <span class='cn'>NA</span>,
               width <span class='op'>=</span> <span class='fl'>0.25</span>,
               alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
               lwd <span class='op'>=</span> <span class='fl'>0.75</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la masse corporelle"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>"Masse (g)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-28-1.png" width="624" /></p>
</div>
<p><br></p>
<p>Si nous préférons des boxplots horizontaux, nous pouvons procéder de deux façons :</p>
<p><strong>1) inverser les variables x et y</strong>, en pensant bien à modifier également les titres des axes avec <code>labs()</code> :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Boxplots horizontaux : inverser les variables x et y</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>masse_g</span>,
                     y <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span>,
                   fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
               show.legend <span class='op'>=</span> <span class='cn'>FALSE</span>,
               outlier.shape <span class='op'>=</span> <span class='cn'>NA</span>,
               width <span class='op'>=</span> <span class='fl'>0.25</span>,
               alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
               lwd <span class='op'>=</span> <span class='fl'>0.75</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la masse corporelle"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Masse (g)"</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><br></p>
<p><strong>2) utiliser <code>coord_flip()</code></strong> pour inverser les coordonnées :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Boxplots horizontaux : inverser les coordonnées avec coord_flip()</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     y <span class='op'>=</span> <span class='va'>masse_g</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span>,
                   fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
               show.legend <span class='op'>=</span> <span class='cn'>FALSE</span>,
               outlier.shape <span class='op'>=</span> <span class='cn'>NA</span>,
               width <span class='op'>=</span> <span class='fl'>0.25</span>,
               alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
               lwd <span class='op'>=</span> <span class='fl'>0.75</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la masse corporelle"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>"Masse (g)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-30-1.png" width="624" /></p>
</div>
<p><br></p>
<p>Nous pouvons <strong>ajouter à ces box plots des scatter plots</strong> pour visualiser les données sous-jacentes :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Boxplots + scatter plots</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     y <span class='op'>=</span> <span class='va'>masse_g</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span>,
                   fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
               show.legend <span class='op'>=</span> <span class='cn'>FALSE</span>,
               outlier.shape <span class='op'>=</span> <span class='cn'>NA</span>,
               width <span class='op'>=</span> <span class='fl'>0.25</span>,
               alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
               lwd <span class='op'>=</span> <span class='fl'>0.75</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             show.legend <span class='op'>=</span> <span class='cn'>FALSE</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.25</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la masse corporelle"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>"Masse (g)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-31-1.png" width="624" /></p>
</div>
<p><br></p>
<p>Nous aimerions <strong>espacer les points</strong> pour rendre le graphique plus lisible. Nous allons pour cela utiliser un autre type de visualisation de nuages de points : <code>geom_jitter()</code>.</p>
<p>Les paramètres <code>height</code> et <code>width</code> permettent d’ajuster l’étalement du nuage respectivement en hauteur et en largeur.</p>
<p>L’utilisation de l’un ou l’autre de ces paramètres dépendra de l’orientation de nos nuages de points (répartition des variables sur les axes x et y et utilisation de <code>coord_flip()</code>).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Boxplots + geom_jitter()</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     y <span class='op'>=</span> <span class='va'>masse_g</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span>,
                   fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
               show.legend <span class='op'>=</span> <span class='cn'>FALSE</span>,
               outlier.shape <span class='op'>=</span> <span class='cn'>NA</span>,
               width <span class='op'>=</span> <span class='fl'>0.25</span>,
               alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
               lwd <span class='op'>=</span> <span class='fl'>0.75</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             show.legend <span class='op'>=</span> <span class='cn'>FALSE</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.25</span>,
             width <span class='op'>=</span> <span class='fl'>0.25</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la masse corporelle"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>"Masse (g)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-32-1.png" width="624" /></p>
</div>
<p><br></p>
<h2 id="barplot">Diagramme en bâtons (bar plot)</h2>
<p><br></p>
<p><strong>Quelle espèce compte le plus de pingouins ?</strong></p>
<p>Nous allons utiliser <code>geom_bar()</code> pour visualiser le nombre de pingouins par espèce :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Barplot</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-33-1.png" width="624" /></p>
</div>
<p><br></p>
<p>Les espèces étant déjà notées sur l’axe x, nous utilisons <code>show.legend = FALSE</code> pour alléger le graphique.</p>
<p><br></p>
<p>Nous souhaiterions ajouter des <strong>étiquettes de texte</strong> au-dessus des barres pour indiquer le nombre de pingouins par espèce. Nous allons pour cela ajouter une couche à l’aide de <code>geom_text()</code> :</p>
<ul>
<li><p><code>aes(label = ..count..)</code> : indique que les étiquettes contiendront le nombre d’observations par groupe défini précédemment (les espèces).</p></li>
<li><p><code>stat = "count"</code> : nécessaire pour que le code fonctionne.</p></li>
<li><p><code>vjust = -1</code> : alignement vertical des étiquettes, vous pouvez essayer différentes valeurs pour voir le résultat.</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Barplot + geom_text()</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>,
            stat <span class='op'>=</span> <span class='st'>"count"</span>,
            vjust <span class='op'>=</span> <span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-34-1.png" width="624" /></p>
</div>
<p>Vous pouvez voir que l’étiquette pour l’espèce Adélie est coupée … il y a plusieurs façons de régler ce problème. Nous allons simplement <strong>positionner les étiquettes à l’intérieur des barres</strong>, <strong>augmenter la taille des caractères</strong> et <strong>colorer le texte en blanc</strong> pour le rendre plus lisible.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Barplot + geom_text() + texte dans les barres</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>,
            stat <span class='op'>=</span> <span class='st'>"count"</span>,
            vjust <span class='op'>=</span> <span class='fl'>1.5</span>,
            colour <span class='op'>=</span> <span class='st'>"white"</span>,
            size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-35-1.png" width="624" /></p>
</div>
<p>Comme vous pouvez le voir, les espèces sont placées le long de l’axe x par <strong>ordre alphabétique</strong>.</p>
<p>Nous préférerions qu’elles soient triées par ordre décroissant de nombre de pingouins. Nous allons voir trois façons de procéder :</p>
<p><br></p>
<p><strong>1) créer un objet intermédiaire</strong> : approche à éviter car elle ajoute un objet dans l’environnement et n’est <strong>pas dynamique</strong>, c’est-à-dire que le code ne sera pas utilisable pour d’autres cas de figure.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Tri avec création d'un objet intermédiaire</span>

<span class='va'>pingouins_tri</span> <span class='op'>&lt;-</span> <span class='va'>pingouins</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>espece <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>espece</span>,
                         levels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span>, <span class='st'>"Gentoo"</span>, <span class='st'>"Chinstrap"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins_tri</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>,
            stat <span class='op'>=</span> <span class='st'>"count"</span>,
            vjust <span class='op'>=</span> <span class='fl'>1.5</span>,
            colour <span class='op'>=</span> <span class='st'>"white"</span>,
            size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><br></p>
<p><strong>2) modifier l’objet <em>pingouins</em> dans la fonction ggplot</strong> : cette approche utilise la fonction <code>mutate()</code> du package <code>dplyr</code> pour créer le facteur espece. Le code ne crée pas de nouvel objet dans l’environnement. Il nous faut par contre <strong>définir les niveaux du facteur</strong> avec <code>levels()</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Tri dans la fonction ggplot() à l'aide de mutate()</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='va'>pingouins</span>,
                     espece <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>espece</span>,
                                     levels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span>, <span class='st'>"Gentoo"</span>, <span class='st'>"Chinstrap"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>,
            stat <span class='op'>=</span> <span class='st'>"count"</span>,
            vjust <span class='op'>=</span> <span class='fl'>1.5</span>,
            colour <span class='op'>=</span> <span class='st'>"white"</span>,
            size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><br></p>
<p><strong>3) utiliser les fonctionnalités du <a href="https://forcats.tidyverse.org/">package <code>forcats</code>**</a> : ce package, qui fait partie du Tidyverse, permet d’effectuer des opérations sur des facteurs. C’est l’</strong>approche la plus dynamique** : R transforme une variable en facteur et détermine automatiquement les niveaux. Nous n’avons donc plus besoin de préciser les niveaux. Nous pouvons par exemple trier les niveaux d’un facteur par ordre d’apparition avec <code>fct_inseq()</code>, ou par ordre de nombre d’observations à l’aide de <code>fct_infreq()</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Tri dans la fonction ggplot() à l'aide des fonctionnalites du package forcats</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='va'>pingouins</span>,
                     espece <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_inorder.html'>fct_infreq</a></span><span class='op'>(</span><span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>,
            stat <span class='op'>=</span> <span class='st'>"count"</span>,
            vjust <span class='op'>=</span> <span class='fl'>1.5</span>,
            colour <span class='op'>=</span> <span class='st'>"white"</span>,
            size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-38-1.png" width="624" /></p>
</div>
<p><br></p>
<p>Comme nous l’avions fait pour les boxplots, nous pouvons <strong>changer l’orientation</strong> des barres.</p>
<p>Nous allons modifier quelques éléments du code :</p>
<ul>
<li><p>en basculant les espèces le long de l’axe y, l’espèce ayant le plus grand nombre de pingouins va se retrouver en bas du graphique. En effet, la variable espece étant un facteur avec des niveaux ordonnés, le premier niveau du facteur se retrouve au plus près de l’origine de l’axe : à gauche si les barres sont orientées verticalement, en bas si elles sont orientées horizontalement. Pour inverser l’ordre des niveaux, nous utilisons <code>fct_rev()</code>.</p></li>
<li><p>nous modifions l’alignement des étiquettes en remplaçant <code>vjust</code> par <code>hjust</code></p></li>
<li><p>nous réduisons la largeur des barres à l’aide du paramètre <code>width</code></p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Barplot horizontal</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='va'>pingouins</span>,
                     espece <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_rev.html'>fct_rev</a></span><span class='op'>(</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_inorder.html'>fct_infreq</a></span><span class='op'>(</span><span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>0.75</span>,
           show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>,
            stat <span class='op'>=</span> <span class='st'>"count"</span>,
            hjust <span class='op'>=</span> <span class='fl'>1.5</span>,
            colour <span class='op'>=</span> <span class='st'>"white"</span>,
            size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-39-1.png" width="624" /></p>
</div>
<p><br></p>
<h3 id="une-note-sur-lutilisation-du-pipe">Une note sur l’utilisation du pipe <code>%&gt;%</code></h3>
<p><br></p>
<p>Nous pouvons également utiliser le <strong>pipe <code>%&gt;%</code></strong> que nous avions vu dans le <a href="https://codons.netlify.app/posts/manipuler-donnees-tidyverse/#rename">tutoriel sur le Tidyverse</a> pour enchaîner les opérations de tri puis la création du graphique.</p>
<p>Cette façon de procéder permet, quand nous manipulons un jeu de données (ajout d’une colonne par exemple), de s’assurer que nous n’avons <strong>pas fait d’erreur</strong> avant de générer le graphique, le tout <strong>sans avoir besoin de créer d’objet intermédiaire</strong>.</p>
<p>L’utilisation du pipe permet également de bénéficier de l’<strong>auto-complétion</strong> à l’aide de la touche <code>Tab</code>, ce qui est plutôt appréciable quand nos variables portent des noms complexes ou que le code contient de nombreux paramètres.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Utilisation du pipe %&gt;%</span>

<span class='va'>pingouins</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>espece <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_rev.html'>fct_rev</a></span><span class='op'>(</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_inorder.html'>fct_infreq</a></span><span class='op'>(</span><span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                       fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>0.75</span>,
           show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>,
            stat <span class='op'>=</span> <span class='st'>"count"</span>,
            hjust <span class='op'>=</span> <span class='fl'>1.5</span>,
            colour <span class='op'>=</span> <span class='st'>"white"</span>,
            size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-40-1.png" width="624" /></p>
</div>
<p><br></p>
<h1 id="facet">Graphiques multiples</h1>
<p><br></p>
<p>Quel est le <strong>rapport entre la longueur du bec et la longueur des ailes</strong> ?</p>
<p>Nous pouvons créer un nuage de points avec les trois espèces sur un même graphique, comme nous l’avons fait jusqu’ici :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Scatter plot : 1 graphique pour les 3 especes</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>aile_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_lngr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Rapport entre la longueur du bec et la longueur des ailes"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur de l'aile (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Longueur du bec (mm)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-41-1.png" width="624" /></p>
</div>
<p><br></p>
<p>Nous souhaitons maintenant visualiser ces données en <strong>sépérant les graphiques par espèce et par île</strong>.</p>
<p>Nous pourrions pour cela créer séparément les graphiques à l’aide de la fonction <code>filter()</code>. <code>ggplot2</code> possède deux fonctions qui le font directement : <strong><code>facet_wrap()</code></strong> et <strong><code>facet_grid()</code></strong>.</p>
<p><br></p>
<h2 id="facet_wrap"><code>facet_wrap()</code></h2>
<p><br></p>
<p>Nous allons simplement ajouter une couche à notre graphique précédent en précisant quelle variable sert à séparer les données (à l’aide d’un <strong>tilde ~</strong>).</p>
<p>Les fonctions <code>facet_...()</code> génèrent automatiquement des étiquettes de texte, nous ajoutons donc le paramètre <code>show.legend = FALSE</code>.</p>
<p>Nous modifions également le <strong>thème</strong> pour rendre les noms des espèces plus lisibles :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># facet_wrap() : 1 graphique par espece</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>aile_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_lngr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
             show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Rapport entre la longueur du bec et la longueur des ailes"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur de l'aile (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Longueur du bec (mm)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>espece</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_light</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-42-1.png" width="624" /></p>
</div>
<p>Nous pouvons modifier l’<strong>orientation</strong> des graphiques à l’aide du paramètre <code>dir = ...</code> (par défaut <code>h</code>, <code>v</code> pour des graphiques orientés verticalement).</p>
<p>Nous pouvons également <strong>déplacer l’étiquette de titre</strong> (noms des espèces dans notre cas) avec le paramètre <code>strip.position = ...</code> (par défaut <code>top</code>, peut prendre les valeurs <code>right</code>, <code>bottom</code> ou <code>left</code>) :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># facet_wrap() : 1 graphique par espece + paramètres</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>aile_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_lngr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
             show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Rapport entre la longueur du bec et la longueur des ailes"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur de l'aile (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Longueur du bec (mm)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>espece</span>,
             dir <span class='op'>=</span> <span class='st'>"v"</span>,
             strip.position <span class='op'>=</span> <span class='st'>"right"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_light</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-43-1.png" width="624" /></p>
</div>
<p><br></p>
<h2 id="facet_grid"><code>facet_grid()</code></h2>
<p><br></p>
<p>Quand nous souhaitons utiliser deux variables discrètes (non continues, avec des catégories) pour séparer nos données, nous utilisons la fonction <code>facet_grid()</code>.</p>
<p>La syntaxe est similaire et nous précisons avec l’opérateur <code>lignes ~ colonnes</code> comment répartir les variables :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># facet_grid() : 1 graphique par combinaison de variables</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>aile_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_lngr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
             show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Rapport entre la longueur du bec et la longueur des ailes"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur de l'aile (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Longueur du bec (mm)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span><span class='va'>espece</span> <span class='op'>~</span> <span class='va'>ile</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_light</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-44-1.png" width="624" /></p>
</div>
<p><strong>Toutes les combinaisons</strong> possibles sont affichées, ce qui génère des graphiques vides dans le cas où la combinaison en question ne possède aucune observation.</p>
<p>Nous pouvons déplacer les étiquettes de titres à l’aide du paramètre <code>switch</code> qui peut prendre trois valeurs : <code>x</code> pour déplacer les étiquettes de l’axe x en bas des graphiques, <code>y</code> pour déplacer les étiquettes des axes y à gauche des graphiques, ou <code>both</code> pour effectuer les deux modifications simultanément :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># facet_grid() : 1 graphique par combinaison de variables + paramètre switch</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>aile_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_lngr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
             show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Rapport entre la longueur du bec et la longueur des ailes"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur de l'aile (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Longueur du bec (mm)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span><span class='va'>espece</span> <span class='op'>~</span> <span class='va'>ile</span>,
             switch <span class='op'>=</span> <span class='st'>"x"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_light</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-45-1.png" width="624" /></p>
</div>
<p><br></p>
<h1 id="exporter">Exporter un graphique</h1>
<p><br></p>
<p>Jusqu’à présent, nos graphiques apparaissaient dans l’onglet <strong>Plots</strong> mais n’étaient pas sauvegardés.</p>
<p>Nous allons voir deux façons d’exporter un graphique :</p>
<ul>
<li><p>directement depuis l’onglet Plot</p></li>
<li><p>en ligne de commande avec <code>ggsave()</code></p></li>
</ul>
<p><br></p>
<h2 id="depuis-longlet-plots">Depuis l’onglet <em>Plots</em></h2>
<p><br></p>
<p>L’onglet <strong>Plots</strong> vous permet de naviguer entre vos graphiques, d’ouvrir le graphique actuellement affiché dans une nouvelle fenêtre, d’exporter votre graphique, de le supprimer ou de supprimer tous les graphiques de la session de travail.</p>
<p><br></p>
<p>En cliquant sur <strong>Export</strong>, vous avez trois options :</p>
<ul>
<li><p>sauvegarder le graphique <strong>sous forme d’image</strong></p></li>
<li><p>sauvegarder le graphique <strong>au format PDF</strong></p></li>
<li><p><strong>copier le graphique</strong> dans le presse-papiers (par exemple pour le coller dans un document)</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/export_ggplot_01.png" width="486" /></p>
</div>
<p><br></p>
<p>Nous allons exporter le barplot horizontal sous forme d’image : cliquez sur <strong>Export</strong> puis <strong>Save as image</strong>.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/export_ggplot_02.png" width="491" /></p>
</div>
<p>Vous aurez alors le choix entre plusieurs <strong>extensions</strong> (<code>.png</code>, <code>.jpeg</code>, …).</p>
<p>Vous pourrez également <strong>redimensionner</strong> votre graphique (en conservant ou non le ratio des dimensions), choisir le <strong>dossier de destination</strong> et <strong>renommer</strong> votre fichier (le nom proposé par défaut n’est pas très explicite …).</p>
<p><br></p>
<h2 id="avec-ggsave">Avec <code>ggsave()</code></h2>
<p><br></p>
<p>Cette fonction permet d’exporter un graphique au format <strong>.png</strong> dans un répertoire, avec les dimensions et la résolution de notre choix.</p>
<p>Vous devez tout d’abord <strong>assigner le graphique à exporter dans un objet</strong>. R étant un langage de programmation orienté objet, tout ce que vous manipulez (les fichiers importés, les fonctions et même les graphiques) sont stockés dans la mémoire vive sous forme d’objet (visibles dans l’onglet <strong>Environment</strong>).</p>
<p>Reprenons le code utilisé pour générer le barplot horizontal et assignons-le à l’objet <code>barplot_especes</code> :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Assigner le graphique à un objet</span>
<span class='va'>barplot_especes</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='va'>pingouins</span>,
                                        espece <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_rev.html'>fct_rev</a></span><span class='op'>(</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_inorder.html'>fct_infreq</a></span><span class='op'>(</span><span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
                          mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                                        fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>0.75</span>,
           show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>,
            stat <span class='op'>=</span> <span class='st'>"count"</span>,
            hjust <span class='op'>=</span> <span class='fl'>1.5</span>,
            colour <span class='op'>=</span> <span class='st'>"white"</span>,
            size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Tout ce qui vous a permis de créer ce graphique est désormais stocké dans l’objet <strong>barplot_especes</strong>. En procédant ainsi, vous n’aurez plus d’aperçu de votre graphique dans l’onglet <strong>Plots</strong>.</p>
<p>Pour ce faire, vous avez deux options :</p>
<ul>
<li><p>appeler l’objet <code>barplot_especes</code> dans la console ou le script et exécuter la commande</p></li>
<li><p><strong>entourer le code précédant par des parenthèses</strong> : cela permet d’assigner le graphique dans l’objet et de l’afficher dans l’onglet Plots.</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Assigner le graphique à un objet et l'afficher</span>
<span class='op'>(</span><span class='va'>barplot_especes</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='va'>pingouins</span>,
                                         espece <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_rev.html'>fct_rev</a></span><span class='op'>(</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_inorder.html'>fct_infreq</a></span><span class='op'>(</span><span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
                           mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                                         fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>0.75</span>,
           show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>,
            stat <span class='op'>=</span> <span class='st'>"count"</span>,
            hjust <span class='op'>=</span> <span class='fl'>1.5</span>,
            colour <span class='op'>=</span> <span class='st'>"white"</span>,
            size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-49-1.png" width="624" /></p>
</div>
<p><br></p>
<p>Nous pouvons maintenant sauvegarder le graphique à l’aide de la fonction <code>ggsave()</code> en utilisant les paramètres suivants :</p>
<ul>
<li><p><code>figs/barplot_especes.png</code> : emplacement du fichier à exporter (dossier/nom-du-fichier)</p></li>
<li><p><code>barplot_especes</code> : nom de l’objet à exporter</p></li>
<li><p><code>dpi = 320</code> : résolution de l’image</p></li>
<li><p><code>width = 12</code> : largeur de l’image</p></li>
<li><p><code>height = 6</code> : hauteur de l’image</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggsave.html'>ggsave</a></span><span class='op'>(</span><span class='st'>"figs/barplot_especes.png"</span>, <span class='va'>barplot_especes</span>, dpi <span class='op'>=</span> <span class='fl'>320</span>, width <span class='op'>=</span> <span class='fl'>12</span>, height <span class='op'>=</span> <span class='fl'>6</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Il existe d’autres paramètres, n’hésitez pas explorer l’aide de la fonction à l’<strong>aide de la commande <code>?ggsave</code></strong>.</p>
<p>Vous pouvez essayer différentes options et valeurs pour voir le résultat.</p>
<p>Ouvrez le fichier <code>barplot_especes.png</code> et comparez ce fichier avec le visuel affiché dans votre session RStudio.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/barplot_especes.png" width="1920" /></p>
</div>
<p><strong>Il n’est pas rare d’avoir quelques surprises</strong> ! La taille des lettres peut par exemple être plus petite dans le fichier exporté que dans l’aperçu RStudio.</p>
<p>Il est toujours utile d’<strong>exporter son graphique</strong> et de <strong>vérifier le rendu</strong> pour <strong>rectifier les paramètres si nécessaire</strong>.</p>
<p><a href="https://www.christophenicault.com/post/understand_size_dimension_ggplot2/">Cet article</a> explique en détail comment paramétrer la taille et la résolution d’une image.</p>
<p><br></p>
<h1 id="ameliorer">Améliorer ses graphiques</h1>
<p><br></p>
<p>Nous avons vu comment créer les principaux types de graphiques ainsi que certains paramètres permettant de modifier leur apparence. Il existe énormément de paramètres permettant de modifier nos graphiques pour les rendre plus attractifs. <strong>Les possibilités sont pour ainsi dire infinies !</strong></p>
<p><br></p>
<p>La suite de ce tutoriel vous donnera quelques éléments pour améliorer vos graphiques, n’hésitez pas à aller voir la section <strong>Liens</strong> du blog pour trouver d’autres ressources qui vous aideront à creuser encore davantage les possibilités de <code>ggplot2</code>.</p>
<p><br></p>
<h2 id="les-différents-éléments-de-theme">Les différents éléments de <code>theme()</code></h2>
<p><br></p>
<p>Un graphique se compose de <strong>quatre parties</strong> principales, dont nous pouvons paramétrer les différents éléments :</p>
<ul>
<li><p>le <strong>“panel”</strong> qui contient les éléments géométriques de visualisation</p></li>
<li><p>le <strong>“plot”</strong> qui contient ce qui entoure le panel (titre, sous-titre, …)</p></li>
<li><p>les <strong>axes</strong> avec les titres, les graduations, …</p></li>
<li><p>la <strong>légende</strong></p></li>
</ul>
<p><br></p>
<p>Nous allons voir comment modifier chaque partie d’un graphique, en utilisant le scatter plot généré au début de ce tutoriel.</p>
<p>Commençons par reprendre le code utilisé et assignons-le à un objet. Nous pourrons ensuite ajouter les couches apportant les modifications :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Scatter plot basique</span>
<span class='op'>(</span><span class='va'>p</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>bec_lngr_mm</span>,
                     y <span class='op'>=</span> <span class='va'>bec_htr_mm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Rapport entre la hauteur et la longueur du bec"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"pour trois espèces de pingouins de l'archipel Palmer"</span>,
       x <span class='op'>=</span> <span class='st'>"Longueur du bec (mm)"</span>,
       y <span class='op'>=</span> <span class='st'>"Hauteur du bec (mm)"</span><span class='op'>)</span>
 <span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-52-1.png" width="624" /></p>
</div>
<p><br></p>
<h3 id="le-panel">Le <strong>panel</strong></h3>
<p><br></p>
<div class="layout-chunk" data-layout="l-body-outset">
<p><img src="img/ggplot_themes_panel.png" width="640" /></p>
</div>
<p>Nous allons pouvoir définir des paramètres pour ces différents éléments, selon la syntaxe suivante : <strong><code>nom-du-parametre = element_...()</code></strong>.</p>
<p>En fonction de ce que nous paramétrons, nous allons utiliser par exemple <code>element_rect()</code> (contour et intérieur d’une zone rectangulaire), <code>element_line()</code> (couleur et épaisseur d’une ligne) ou <code>element_text()</code> (police de caractères, taille et couleur du texte, alignement).</p>
<p><br></p>
<p>Nous allons modifier les éléments suivants du panel :</p>
<ul>
<li><p><strong>couleur de l’arrière-plan</strong> avec <code>panel.background = element_rect(fill = ..., colour = ...)</code><br />
</p></li>
<li><p><strong>couleur et de la bordure</strong> avec <code>panel.border = element_rect(...)</code> (attention, la bordure se paramètre comme une zone rectangulaire : il faut donc préciser <code>fill = NA</code> pour que l’arrière-plan du panel conserve la couleur définie dans <code>panel.background()</code>)</p></li>
<li><p><strong>retirer les lignes de graduations mineures</strong> avec <code>panel.grid.minor = element_blank()</code></p></li>
<li><p><strong>couleur et type des lignes de graduations majeures</strong> avec <code>panal.grid.major = element_line(colour = ..., linetype = ...)</code></p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Parametrer les elements du panel</span>
<span class='op'>(</span><span class='va'>p1</span> <span class='op'>&lt;-</span> <span class='va'>p</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>panel.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#1d3557"</span>, colour <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
        panel.border <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='cn'>NA</span>, colour <span class='op'>=</span> <span class='st'>"white"</span>, size <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,
        panel.grid.minor <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        panel.grid.major <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span>,
                                        linetype <span class='op'>=</span> <span class='st'>"dotted"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-54-1.png" width="624" /></p>
</div>
<p><br></p>
<h3 id="le-plot">Le plot</h3>
<p><br></p>
<div class="layout-chunk" data-layout="l-body-outset">
<p><img src="img/ggplot_themes_plot.png" width="640" /></p>
</div>
<p>Nous allons utiliser la <strong>même couleur pour l’arrière-plan de la zone de plot (<code>plot.background()</code>)</strong>, ce qui nécessitera de modifier la <strong>couleur du titre (<code>plot.title</code>) et du sous-titre (<code>plot.subtitle</code>)</strong> (et plus tard des titres et du texte des axes et de la légende).</p>
<p>Nous allons également utiliser <code>plot.margin()</code> pour <strong>augmenter l’espace</strong> entre le bord supérieur de la zone de plot et le titre. Les fonctions permettant de modifier les marges s’utilisent de la manière suivante : <code>plot.margin = margin(top = ..., right = ..., bottom = ..., left = ...)</code>. Vous pouvez utiliser les initiales : <code>margin(t = ..., r = ..., b = ..., l = ...)</code> ou simplement les valeurs numériques des quatres paramètres séparées par des virgules.</p>
<p>Nous pouvons aligner le titre et le sous-titre au centre (<code>hjust = 0.5</code>) et ajouter de l’espace entre le haut du panel et le sous-titre pour aérer notre graphique. Nous pouvons pour cela ajouter un paramètre <code>margin</code> dans l’élément <code>plot.subtitle = element_text()</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Parametrer les elements du plot</span>
<span class='op'>(</span><span class='va'>p2</span> <span class='op'>&lt;-</span> <span class='va'>p1</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>plot.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#1d3557"</span>, colour <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
        plot.margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>t <span class='op'>=</span> <span class='fl'>10</span>, r <span class='op'>=</span> <span class='fl'>10</span>, b <span class='op'>=</span> <span class='fl'>10</span>, l <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>,
        plot.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span>, size <span class='op'>=</span> <span class='fl'>20</span>,
                                  hjust <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>,
        plot.subtitle <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span>, size <span class='op'>=</span> <span class='fl'>15</span>,
                                     hjust <span class='op'>=</span> <span class='fl'>0.5</span>, margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-56-1.png" width="624" /></p>
</div>
<p>Le titre et le sous-titre de notre graphique sont alignés sur le centre de la zone panel. Pour les aligner par rapport à la zone plot, nous utilisons un paramètre supplémentaire : <code>plot.title.position = "plot"</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Aligner le titre et le sous-titre sur le centre de la zone plot</span>
<span class='op'>(</span><span class='va'>p2</span> <span class='op'>&lt;-</span> <span class='va'>p1</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>plot.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#1d3557"</span>, colour <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
        plot.margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>t <span class='op'>=</span> <span class='fl'>10</span>, r <span class='op'>=</span> <span class='fl'>10</span>, b <span class='op'>=</span> <span class='fl'>10</span>, l <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>,
        plot.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span>, size <span class='op'>=</span> <span class='fl'>20</span>,
                                  hjust <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>,
        plot.title.position <span class='op'>=</span> <span class='st'>"plot"</span>,
        plot.subtitle <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span>, size <span class='op'>=</span> <span class='fl'>15</span>,
                                     hjust <span class='op'>=</span> <span class='fl'>0.5</span>, margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>15</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-57-1.png" width="624" /></p>
</div>
<p><br></p>
<h3 id="les-axes">Les axes</h3>
<p><br></p>
<div class="layout-chunk" data-layout="l-body-outset">
<p><img src="img/ggplot_themes_axis.png" width="640" /></p>
</div>
<p>Nous allons modifier la <strong>couleur des titres des axes</strong>. Nous pourrions le faire pour les axes x et y à l’aide de <code>axis.title = element_text(colour = "white)</code>.</p>
<p>Nous aimerions cependant <strong>augmenter l’espace entre le titres des axes et les axes</strong>, nous devons pouvons utiliser <code>axis.title.x = element_text(colour = "white", margin = margin(t = 10))</code> et <code>axis.title.y = element_text(colour = "white", margin = margin(r = 10))</code> pour respecter l’orientation des titres.</p>
<p>Nous allons également modifier la couleur du texte des axes avec <code>axis.text = element_text(...)</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Parametrer les axes</span>
<span class='op'>(</span><span class='va'>p3</span> <span class='op'>&lt;-</span><span class='va'>p2</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>axis.title.x <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span>,
                                    margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>t <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>,
        axis.title.y <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span>,
                                    margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>r <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>,
        axis.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-59-1.png" width="624" /></p>
</div>
<p>Nous pourrions également <strong>retirer les marques des graduations</strong> à l’aide de <code>axis.ticks = element_blank()</code>, mais celles-ci ne sont pas visibles avec les modifications apportées au graphique.</p>
<p>Pour montrer l’intérêt de ce paramètre, reprenons notre premier graphique :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Premier scatter plot</span>
<span class='va'>p</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-60-1.png" width="624" /></p>
</div>
<p>Nous pouvons retirer de ces marques :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Supprimer les marques des graduations</span>
<span class='va'>p</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>axis.ticks <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-61-1.png" width="624" /></p>
</div>
<p><br></p>
<h3 id="la-légende">La légende</h3>
<p><br></p>
<div class="layout-chunk" data-layout="l-body-outset">
<p><img src="img/ggplot_themes_legend.png" width="640" /></p>
</div>
<p>Nous allons modifier la <strong>couleur de l’arrière-plan de la légende</strong> (pour deux zones : le texte et les points), <strong>modifier la couleur et la taille du texte</strong> et <strong>supprimer le titre</strong>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Parametrer la legende</span>
<span class='op'>(</span><span class='va'>p4</span> <span class='op'>&lt;-</span> <span class='va'>p3</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#1d3557"</span><span class='op'>)</span>,
        legend.key <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        legend.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span>, size <span class='op'>=</span> <span class='fl'>15</span><span class='op'>)</span>,
        legend.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-63-1.png" width="624" /></p>
</div>
<p>Nous pouvons modifier la <strong>position de la légende</strong> :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Modifier la position de la legende</span>
<span class='op'>(</span><span class='va'>p4</span> <span class='op'>&lt;-</span> <span class='va'>p3</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#1d3557"</span><span class='op'>)</span>,
        legend.key <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        legend.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span>, size <span class='op'>=</span> <span class='fl'>15</span><span class='op'>)</span>,
        legend.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        legend.position <span class='op'>=</span> <span class='st'>"top"</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-64-1.png" width="624" /></p>
</div>
<p>La taille, la couleur et la transparence des points de la légende reprennent les paramètres utilisés dans <code>geom_point()</code>. Nous aimerions modifier ces éléments de la légende pour augmenter la taille des points et supprimer leur transparence pour simplifier la lecture de la légende.</p>
<p>Nous utilisons pour cela le <strong>paramètre <code>guides()</code></strong> :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Modifier la representation des points de la legende</span>
<span class='op'>(</span><span class='va'>p4</span> <span class='op'>&lt;-</span> <span class='va'>p3</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#1d3557"</span><span class='op'>)</span>,
        legend.key <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        legend.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span>, size <span class='op'>=</span> <span class='fl'>15</span><span class='op'>)</span>,
        legend.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        legend.position <span class='op'>=</span> <span class='st'>"top"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend</a></span><span class='op'>(</span>override.aes <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>1</span>,
                                                   size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-65-1.png" width="624" /></p>
</div>
<p><br></p>
<h2 id="modifier-la-police-du-texte-avec-showtext">Modifier la police du texte avec <code>showtext</code></h2>
<p><br></p>
<p>Nous aimerions utiliser d’autres polices de caractères pour notre graphique.</p>
<p>Le <a href="https://github.com/yixuan/showtext">package <code>showtext()</code></a> permet d’utiliser des polices <strong>Google fonts</strong> dans nos graphiques, n’hésitez pas à fouiller pour trouver celle qui vous convient !</p>
<p>Installez et chargez le package showtext :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Installer et charger le package showtext</span>
<span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"showtext"</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/yixuan/showtext'>showtext</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Nous allons utiliser la police <strong>Righteous</strong> pour le titre et le sous-titre, et la police <strong>Gruppo</strong> pour la légende et les axes :</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/sysfonts/man/font_add_google.html'>font_add_google</a></span><span class='op'>(</span><span class='st'>"Righteous"</span>, <span class='st'>"Righteous"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/sysfonts/man/font_add_google.html'>font_add_google</a></span><span class='op'>(</span><span class='st'>"Gruppo"</span>, <span class='st'>"Gruppo"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/showtext/man/showtext_auto.html'>showtext_auto</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Nous modifions également les <strong>marges du graphique</strong>, la <strong>taille du texte</strong> et l’<strong>alignement du titre et du sous-titre</strong> :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Modifier la police de caractères du titre et du sous-titre</span>
<span class='op'>(</span><span class='va'>p5</span> <span class='op'>&lt;-</span> <span class='va'>p4</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>plot.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Righteous"</span>,
                                  size <span class='op'>=</span> <span class='fl'>25</span>, margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>t <span class='op'>=</span> <span class='fl'>5</span>, b <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>,
        plot.subtitle <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Righteous"</span>, size <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span>,
        plot.title.position <span class='op'>=</span> <span class='st'>"panel"</span>,
        plot.margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>15</span>, <span class='fl'>5</span>, <span class='fl'>15</span><span class='op'>)</span>,
        legend.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Gruppo"</span>, size <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span>,
        axis.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Gruppo"</span>, size <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span>,
        axis.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Gruppo"</span>, size <span class='op'>=</span> <span class='fl'>15</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="visualiser-donnees-ggplot2_files/figure-html5/unnamed-chunk-69-1.png" width="624" /></p>
</div>
<p><br></p>
<h1 id="combiner-des-graphiques-avec-patchwork">Combiner des graphiques avec <code>patchwork</code></h1>
<p><br></p>
<p>Le <a href="https://patchwork.data-imaginist.com/">package <code>patchwork</code></a> permet de <strong>combiner plusieurs graphiques en une seule image</strong>.</p>
<p>Installons et chargeons ce package :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"patchwork"</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://patchwork.data-imaginist.com'>patchwork</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">

</div>
<p>Notre objectif est de combiner trois graphiques :</p>
<p><strong>1) Un barplot du nombre de pingouins par île</strong></p>
<p><strong>2) Un barplot du nombre de pingouins par espèce</strong></p>
<p><strong>3) Un histogramme de la distribution de la masse corporelle</strong></p>
<p><br></p>
<p>Nous allons créer ces trois graphiques séparément. Quelques ajustements seront nécessaires : taille du texte, largeur des barres et des boîtes à moustaches, …</p>
<p><br></p>
<p>Le code ci-dessous tient compte de ces ajustements, n’hésitez pas à essayer différents réglages des paramètres pour obtenir le graphique qui vous convient ! L’onglet <strong>Plots</strong> de RStudio affiche un graphique peu fidèle au résultat final après exportation de l’image au format .png, il est donc nécessaire de faire des essais, exporter l’image ou l’ouvrir pour faire les ajustements.</p>
<p>Nous allons utiliser la même couleur d’arrière-plan, les mêmes polices, etc. pour les différents graphiques.</p>
<p>Nous pouvons donc définir un thème personnalisé qui contient ces paramètres : nous l’utiliserons comme nous l’avions fait avec <code>theme_minimal()</code> par exemple. Nous pourrons modifier d’autres paramètres à l’aide de la fonction <code>theme()</code> pour les éléments propres à l’un des graphiques.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Theme personnalise</span>
<span class='va'>theme_perso</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>panel.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#1d3557"</span>, colour <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
        plot.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#1d3557"</span>, colour <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
        plot.margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span><span class='fl'>15</span>, <span class='fl'>15</span>, <span class='fl'>15</span>, <span class='fl'>15</span><span class='op'>)</span>,
        plot.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Righteous"</span>, colour <span class='op'>=</span> <span class='st'>"white"</span>, size <span class='op'>=</span> <span class='fl'>40</span>, 
                                  margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span>, hjust <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>,
        plot.subtitle <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Righteous"</span>, colour <span class='op'>=</span> <span class='st'>"white"</span>, size <span class='op'>=</span> <span class='fl'>20</span>,
                                     margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>, hjust <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>,
        legend.background <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='st'>"#1d3557"</span>, colour <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>,
        legend.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        legend.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Gruppo"</span>, colour <span class='op'>=</span> <span class='st'>"white"</span>, size <span class='op'>=</span> <span class='fl'>40</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>Nous venons de créer une <strong>fonction</strong> : nous pouvons l’appliquer à nos graphiques à l’aide de <code>theme_perso()</code>.</p>
<p><br></p>
<p>Créons maintenant chacun des graphiques :</p>
<p><br></p>
<p><strong>1) Barplot du nombre de pingouins par ile</strong></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># p1 : barplot du nombre de pingouins par ile</span>
<span class='va'>p1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='va'>pingouins</span>,
                     ile <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_rev.html'>fct_rev</a></span><span class='op'>(</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_inorder.html'>fct_infreq</a></span><span class='op'>(</span><span class='va'>ile</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>ile</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>0.75</span>,
           fill <span class='op'>=</span> <span class='st'>"#dcf3ff"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>,
            stat <span class='op'>=</span> <span class='st'>"count"</span>,
            family <span class='op'>=</span> <span class='st'>"Gruppo"</span>,
            hjust <span class='op'>=</span> <span class='fl'>1.5</span>,
            colour <span class='op'>=</span> <span class='st'>"#1d3557"</span>,
            size <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins par île"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_perso</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>panel.grid <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        axis.text.x <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        axis.text.y <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Gruppo"</span>, colour <span class='op'>=</span> <span class='st'>"#dcf3ff"</span>,
                                   size <span class='op'>=</span> <span class='fl'>40</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><br></p>
<p><strong>2) Barplot du nombre de pingouins par espece</strong></p>
<p>Nous utilisons ici <code>show.legend = TRUE</code> pour que la correspondance entre les couleurs et les espèces apparaisse dans notre graphique. Nous pourrons déplacer la légende avec <code>patchwork</code> quand nous combinerons les trois graphiques.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># p2 : barplot du nombre de pingouins par espece</span>
<span class='va'>p2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='va'>pingouins</span>,
                     espece <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_rev.html'>fct_rev</a></span><span class='op'>(</span><span class='fu'><a href='https://forcats.tidyverse.org/reference/fct_inorder.html'>fct_infreq</a></span><span class='op'>(</span><span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>0.75</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>..count..</span><span class='op'>)</span>,
            stat <span class='op'>=</span> <span class='st'>"count"</span>,
            family <span class='op'>=</span> <span class='st'>"Gruppo"</span>,
            hjust <span class='op'>=</span> <span class='fl'>1.5</span>,
            colour <span class='op'>=</span> <span class='st'>"white"</span>,
            size <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Nombre de pingouins par espèce"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_perso</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>panel.grid <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        axis.text <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><br></p>
<p><strong>3) Boxplot + scatter plot de la distribution de la masse</strong></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># p3 : boxplot + scatter plot de la distribution de la masse </span>
<span class='va'>p2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>pingouins</span>,
       mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>espece</span>,
                     y <span class='op'>=</span> <span class='va'>masse_g</span> <span class='op'>/</span> <span class='fl'>1e3</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span>,
                   fill <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
               show.legend <span class='op'>=</span> <span class='cn'>FALSE</span>,
               outlier.shape <span class='op'>=</span> <span class='cn'>NA</span>,
               width <span class='op'>=</span> <span class='fl'>0.5</span>,
               alpha <span class='op'>=</span> <span class='fl'>0.5</span>,
               lwd <span class='op'>=</span> <span class='fl'>0.75</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>espece</span><span class='op'>)</span>,
              show.legend <span class='op'>=</span> <span class='cn'>FALSE</span>,
              alpha <span class='op'>=</span> <span class='fl'>0.25</span>,
              width <span class='op'>=</span> <span class='fl'>0.25</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                                 <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                                 <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adelie"</span> <span class='op'>=</span> <span class='st'>"darkorange"</span>,
                               <span class='st'>"Chinstrap"</span> <span class='op'>=</span> <span class='st'>"purple"</span>,
                               <span class='st'>"Gentoo"</span> <span class='op'>=</span> <span class='st'>"cyan4"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Distribution de la masse corporelle"</span>,
       x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>"Masse (kg)"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>6</span>, <span class='fl'>1</span><span class='op'>)</span>,
                     limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2.5</span>, <span class='fl'>6.5</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_perso</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>panel.grid.minor <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        panel.grid.major.y <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span>,
        panel.grid.major.x <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"white"</span>, 
                                          linetype <span class='op'>=</span> <span class='st'>"dotted"</span>,
                                          size <span class='op'>=</span> <span class='fl'>0.2</span><span class='op'>)</span>,
        plot.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span>,
        plot.title.position <span class='op'>=</span> <span class='st'>"panel"</span>,
        axis.title.x <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Gruppo"</span>,
                                    colour <span class='op'>=</span> <span class='st'>"white"</span>,
                                    size <span class='op'>=</span> <span class='fl'>40</span>,
                                    margin <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>margin</a></span><span class='op'>(</span>t <span class='op'>=</span> <span class='fl'>15</span><span class='op'>)</span><span class='op'>)</span>,
        axis.text.x <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"Gruppo"</span>,
                                   colour <span class='op'>=</span> <span class='st'>"white"</span>,
                                   size <span class='op'>=</span> <span class='fl'>40</span><span class='op'>)</span>,
        axis.text.y <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Combiner les trois graphiques avec <code>patchwork</code></strong> :</p>
<p>La syntaxe de ce package est plutôt simple : nous plaçons les deux barplots côte à côte sur une première ligne, et le boxplot sur un deuxième ligne : <strong><code>(p1 + p2) / p3</code></strong>.</p>
<p><br></p>
<p>Nous précisons ensuite, à l’aide de <strong><code>plot_layout()</code></strong> que nous voulons une taille relative plus importante pour la deuxième ligne (<code>heights = c(1, 2)</code>).</p>
<p>Le code <strong><code>guides = "collect"</code></strong> indique que les légendes des différents graphiques sont à regrouper (très utile pour éviter d’avoir plusieurs fois la même légende dans le graphique final).</p>
<p>Nous ajoutons un titre global avec <strong><code>plot_annotation()</code></strong>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Combiner les trois graphiques avec patchwork </span>
<span class='va'>p</span> <span class='op'>&lt;-</span> <span class='op'>(</span><span class='va'>p1</span> <span class='op'>+</span> <span class='va'>p2</span><span class='op'>)</span> <span class='op'>/</span> <span class='va'>p3</span> <span class='op'>+</span>
  <span class='fu'>patchwork</span><span class='fu'>::</span><span class='fu'><a href='https://patchwork.data-imaginist.com/reference/plot_layout.html'>plot_layout</a></span><span class='op'>(</span>heights <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span><span class='op'>)</span>,
                         guides <span class='op'>=</span> <span class='st'>"collect"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>patchwork</span><span class='fu'>::</span><span class='fu'><a href='https://patchwork.data-imaginist.com/reference/plot_annotation.html'>plot_annotation</a></span><span class='op'>(</span>
    title <span class='op'>=</span> <span class='st'>"Pingouins de l'archipel Palmer"</span>,
    theme <span class='op'>=</span> <span class='fu'>theme_perso</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
      <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>plot.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><br></p>
<p>Exportons ce graphique :</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Exporter le graphique</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggsave.html'>ggsave</a></span><span class='op'>(</span><span class='st'>"figs/patchwork_pingouins.png"</span>, <span class='va'>p</span>, dpi <span class='op'>=</span> <span class='fl'>320</span>, width <span class='op'>=</span> <span class='fl'>12</span>, height <span class='op'>=</span> <span class='fl'>6</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><br></p>
<p>Voici le résultat :</p>
<div class="layout-chunk" data-layout="l-body-outset">
<p><img src="img/patchwork_pingouins.png" width="1920" /></p>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
